{"version":3,"file":"app-user.service.js","sourceRoot":"","sources":["app-user.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable, Inject, EventEmitter } from '@angular/core';\r\nimport { Response } from '@angular/http';\r\nimport { HttpWrapperService } from '../http/http-wrapper.service';\r\nimport { Observable } from \"rxjs/Rx\";\r\nimport { AuthGuard } from '../auth/auth.guard';\r\n//import { ADMIN_FEATURES } from '../../admin-features.constant';\r\nimport { IMAGES } from '../properties/images.constant';\r\n\r\n\r\nexport class AppUserService {\r\n\r\n    private appData: any;\r\n    private userData: any;\r\n    private _sso: any;\r\n    private fullFeaturesList: any;\r\n    private accessResults: any;\r\n    private userFeatures: any;\r\n    private appFeatures: any;\r\n    private isAdmin: any;\r\n    private adminFeatures: any;\r\n    static userTimezone: any;\r\n    private layout: any;\r\n    static routeAccessEv: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    constructor( private http: HttpWrapperService) {\r\n        this._sso = window.sessionStorage.getItem('_sso');\r\n    }\r\n\r\n    static getAppRoutes(features: any, routes: Array<any>): Array<any> {\r\n        routes = [];\r\n        if (features) {\r\n            for (let feature of features) {\r\n                if (feature[\"path\"]) {\r\n                    feature.canActivate = [AuthGuard];\r\n                    routes.push(feature);\r\n                }\r\n                if (feature[\"features\"] && feature[\"features\"].length > 0) {\r\n                    let frs = this.getAppRoutes(feature[\"features\"], routes);\r\n                    for (let f of frs) {\r\n                        if (f['path']) {\r\n                            routes.push(f);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return routes;\r\n    }\r\n\r\n    public load(features: any, ADMIN_FEATURES: any) {\r\n        this.formatFeatures(features, '');\r\n        this.appFeatures = features;\r\n        this.formatFeatures(ADMIN_FEATURES, '');\r\n        this.adminFeatures = this.__getAdminFeatures(ADMIN_FEATURES, '');\r\n\r\n        let adminFeatures = this.__getAdminFeatures(ADMIN_FEATURES, '');\r\n        let appFeatures = AppUserService.getAppRoutes(features, []);\r\n\r\n        this.fullFeaturesList = adminFeatures.concat(appFeatures);\r\n\r\n        let accessAPI: string = window.sessionStorage.getItem('FRAMEWORK_SERVER_BASE_URL') + \"/rest/1.0/client/\"+window.sessionStorage.getItem('appName')+\"/access?_sso=\"+window.sessionStorage.getItem('_sso');\r\n\r\n        if (!this.accessResults) {\r\n            this.accessResults = this.http.get(accessAPI)\r\n                .map((res: any) => {this.init(res.json()); return res.json();})\r\n                .publishReplay(1).refCount();\r\n        }\r\n    }\r\n\r\n    public getSso() {\r\n        return this._sso;\r\n    }\r\n\r\n    public getFullFeaturesList() {\r\n        // return clone of fullFeaureList to avoid changes on main object.\r\n        if(this.fullFeaturesList && this.fullFeaturesList.length) {\r\n            return this.processComponent(JSON.parse(JSON.stringify(this.fullFeaturesList)), this.fullFeaturesList);\r\n        } else {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    public getUserData() {\r\n        return this.userData;\r\n    }\r\n\r\n    public getAdminFeatures(): Array<any> {\r\n        // return clone of adminFeatures to avoid changes on main object.\r\n        return this.processComponent(JSON.parse(JSON.stringify(this.adminFeatures)), this.adminFeatures);\r\n    }\r\n\r\n    public getAccessDetails() {\r\n        return this.accessResults;\r\n\r\n    }\r\n\r\n    public getUserFeatures() {\r\n        return this.userFeatures;\r\n    }\r\n\r\n    public getAppFeatures() {\r\n        return this.appFeatures;\r\n    }\r\n\r\n    public getIsAdmin() {\r\n        return this.userData.accessRights.isAdmin;//this.isAdmin;\r\n    }\r\n\r\n    public getLayout() {\r\n        return this.layout;\r\n    }\r\n\r\n    // this method is to populate component property\r\n    private processComponent(features: any, actf: any) {\r\n        for (let f of features) {\r\n            for (let af of actf) {\r\n                if (f['path'] == af['path']) {\r\n                    if (af['component']){\r\n                        f['component'] = af['component'];\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return features;\r\n    }\r\n\r\n    /**\r\n    * returns possible values \"false\" - No Access, \"true\" - Read or Full Access\r\n    */\r\n    public isAccessible(path: any): Observable<boolean> {\r\n            return Observable.create((observer:any) => {\r\n                this.accessResults.subscribe(\r\n                        (data: Response) => {\r\n                            let permission = 'N';\r\n                            if (data) {\r\n                                for (let feature of this.fullFeaturesList) {\r\n                                    if (this.comparePath(feature['path'], path)) {\r\n                                        permission =  feature['accessType'];\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            observer.next((permission=='N'?false:true));\r\n                            //call complete if you want to close this stream (like a promise)\r\n                            observer.complete();\r\n                        },\r\n                        (error:any) => console.log(\"Error HTTP GET Service\"),\r\n                        () => {}\r\n                        );\r\n            });\r\n    }\r\n\r\n    /**\r\n    * returns possible values \"N\" - No Access, \"R\" - Read Access, \"W\" - Full Access\r\n    */\r\n    public getAccessPermission(path: any){\r\n        let permission = 'N';\r\n        for (let feature of this.fullFeaturesList) {\r\n            if (this.comparePath(feature['path'], path)) {\r\n                permission =  feature['accessType'];\r\n                break;\r\n            }\r\n        }\r\n       return permission;\r\n    }\r\n\r\n    public comparePath(featurePath: any, inputPath: any) {\r\n        let featurePathTokens: Array<string> = featurePath.split('/');\r\n        let inputPathTokens: Array<string> = inputPath.split('/');\r\n\r\n        if (featurePathTokens.length !== inputPathTokens.length) {\r\n            return false;\r\n        }\r\n\r\n        for (var i = 0; i < featurePathTokens.length; i++) {\r\n            if (featurePathTokens[i].indexOf(':') !== -1) {\r\n                break;\r\n            }\r\n            if (featurePathTokens[i] !== inputPathTokens[i]) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private __getAdminFeatures(featuresRoute: Array<any>, parentpath: string): Array<any> {\r\n        let adminFeatures: Array<Object> = [];\r\n        for (let feature of featuresRoute) {\r\n            feature.parentpath = (feature[\"isMenuItem\"] ? null: parentpath);\r\n            if (feature.path) {\r\n                adminFeatures.push(feature);\r\n            }\r\n            if (feature['features'] && feature['features'].length > 0) {\r\n                let cfeatures = this.__getAdminFeatures( feature['features'], (feature[\"isMenuItem\"] ? feature['path'] : parentpath) );\r\n                for (let f of cfeatures) {\r\n                    if (f.path) {\r\n                        adminFeatures.push(f);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return adminFeatures;\r\n    }\r\n\r\n   /**\r\n    * This method is to populate access permission for all the features.\r\n    */\r\n   private init(data: any) {\r\n       var that = this;\r\n       this.userData = data.results;\r\n       this.layout = this.userData['activeLayout'];\r\n\r\n       this.userFeatures = [];\r\n       // update full feature list with permissions.\r\n       for (let feature of this.fullFeaturesList) {\r\n           let uf: any = null;\r\n           for (let userFeature of this.userData.accessRights.featuresVO) {\r\n               if (feature['isMenuItem'] && (feature['path'] === userFeature['path'])) {\r\n                   uf = userFeature;\r\n                   break;\r\n               } else if(feature['parentpath'] === userFeature['path']) {\r\n                   uf = userFeature;\r\n                   break;\r\n               }\r\n           }\r\n\r\n           feature['accessType'] = (uf ? (uf['accessType'] ? uf['accessType'] : \"N\") : this.userData.accessRights.defaultAccessType);\r\n           if (feature['isMenuItem'] && feature['accessType'] && feature['accessType'] != \"N\") {\r\n               this.userFeatures.push(feature);\r\n           }\r\n       }\r\n\r\n       // remove all admin features from user feature list\r\n       if (this.userData && this.userData.accessRights.isAdmin == \"0\") {\r\n           for (let admfeature of this.adminFeatures) {\r\n               for ( let i = this.userFeatures.length - 1; i >= 0; i-- ) {\r\n                   if (admfeature['path'] === this.userFeatures[i]['path']) {\r\n                       this.userFeatures.splice(i, 1);\r\n                   }\r\n               }\r\n           }\r\n       }\r\n\r\n       // exposing services for other application integration access\r\n      /*window.appUtils = {\r\n           getAccessPermission : function(path: any) { return that.getAccessPermission(path);},\r\n           getFullFeaturesList : function() { return that.getFullFeaturesList();},\r\n           getUserInfo         : function() { return JSON.parse(JSON.stringify(that.userData.user));}\r\n       };*/\r\n   }\r\n\r\n   formatFeatures(features: any, pbc: any) {\r\n       let appHost = window.location.origin+'/'+window.sessionStorage.getItem('appName');\r\n       for(var i in features) {\r\n           if(features[i].featureUri && features[i].featureUri.indexOf('http') < 0) {\r\n               features[i].featureUri = appHost + features[i].featureUri;\r\n           }\r\n           let bc: any = [];\r\n           for (let i in pbc) {\r\n               bc.push(pbc[i]);\r\n           }\r\n           var obj: any = {\r\n               displayName: features[i].featureName,\r\n           };\r\n           if (features[i].featureUri) {\r\n               obj.featureUri = features[i].featureUri;\r\n           }\r\n           if (features[i].component) {\r\n               obj.url = features[i].path;\r\n           }\r\n           if (features[i].image) {\r\n               obj.image = features[i].image;\r\n           }\r\n           bc.push(obj);\r\n\r\n           if(bc[0] && !bc[0].image) {\r\n                bc[0].image = IMAGES.NON_ADMIN_BREADCRUMB_LOGO;\r\n           }\r\n\r\n           features[i]['breadscrumbData'] = bc;\r\n           if (features[i].features && features[i].features.length > 0) {\r\n               this.formatFeatures(features[i].features, bc);\r\n           }\r\n       }\r\n   }\r\n\r\n   sortJsonArrayByProperty(objArray: any, sortBy: any, sortOrder: any){\r\n       if (arguments.length<2) throw new Error(\"sortJsonArrayByProp requires 2 arguments\");\r\n       var direct = arguments.length>2 ? arguments[2] : 1; //default sort order ascending\r\n\r\n       if (objArray && objArray.constructor===Array){\r\n           var propPath = (sortBy.constructor===Array) ? sortBy : sortBy.split(\".\");\r\n           objArray.sort(function(a: any, b: any){\r\n               for (var p in propPath){\r\n                   if (a[propPath[p]] && b[propPath[p]]){\r\n                       a = a[propPath[p]];\r\n                       b = b[propPath[p]];\r\n                   }\r\n               }\r\n               // convert numeric strings to integers\r\n               a = a.match(/^\\d+$/) ? +a : a;\r\n               b = b.match(/^\\d+$/) ? +b : b;\r\n               return ( (a < b) ? -1*direct : ((a > b) ? 1*direct : 0) );\r\n           });\r\n       }\r\n   }\r\n\r\n    static setTimezone(timezone: any) {\r\n        this.userTimezone = timezone;\r\n    }\r\n\r\n    static getTimezone() {\r\n        return this.userTimezone;\r\n    }\r\n\r\n    getAppFeaturesMenu(featuresList: any) {\r\n        for(let i = featuresList.length - 1; i >= 0; i--) {\r\n            if(featuresList[i].features && featuresList[i].features.length) {\r\n                for(let j = featuresList[i].features.length - 1; j >= 0; j--) {\r\n                    if(featuresList[i].features[j].accessType == 'N'){\r\n                        featuresList[i].features.splice(j, 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return featuresList;\r\n    }\r\n\r\n    getFeaturesJsonData() {\r\n        let that = this;\r\n        return new Promise(function (resolve, reject) {\r\n            that.http.get1(\"http://localhost:8080/budgetApp\"+\"/features.json?callback=JSONP_CALLBACK\")\r\n            .subscribe(\r\n            (data: any) => {\r\n                resolve(data);\r\n            },\r\n            (err: any) => {\r\n                  reject(err);\r\n              }\r\n            );\r\n        });\r\n    }\r\n\r\n    static routeAccess(access: any) {\r\n        this.routeAccessEv.next(access);\r\n    }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: HttpWrapperService, decorators: [{ type: Inject, args: [HttpWrapperService, ] }, ]},\n];\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}